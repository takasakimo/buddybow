# お名前.comでドメイン契約とVercel設定手順

## 1. お名前.comでドメインを契約

### 1-1. ドメインを検索・選択

1. [お名前.com](https://www.onamae.com/) にアクセス
2. トップページの検索ボックスに希望のドメイン名を入力（例: `buddybow.jp`）
3. 「検索」ボタンをクリック
4. 利用可能なドメインを確認し、希望のドメインを選択

### 1-2. ドメインを購入

1. カートに追加
2. お名前.comのアカウントにログイン（新規登録が必要な場合は登録）
3. 購入手続きを完了
4. 支払いを完了

### 1-3. ドメイン管理画面にアクセス

1. お名前.comにログイン
2. 「ドメイン」→「ドメイン一覧」に移動
3. 契約したドメインを選択

## 2. Vercelでカスタムドメインを設定

### 2-1. Vercelダッシュボードでドメインを追加

1. [Vercelダッシュボード](https://vercel.com) にログイン
2. プロジェクト「buddybow」を選択
3. **Settings** → **Domains** に移動
4. 「Add Domain」ボタンをクリック
5. 契約したドメイン名を入力（例: `buddybow.jp`）
6. 「Add」をクリック

### 2-2. DNS設定情報を確認

Vercelが以下のDNS設定情報を表示します：

- **Type**: `A` または `CNAME`
- **Name**: `@` または `www` など
- **Value**: Vercelが提供するIPアドレスまたはCNAME値

例：
```
Type: A
Name: @
Value: 76.76.21.21
```

または

```
Type: CNAME
Name: www
Value: cname.vercel-dns.com
```

## 3. お名前.comでDNS設定

### 3-1. DNS設定画面にアクセス

1. お名前.comのドメイン管理画面で、契約したドメインを選択
2. 「DNS関連機能の設定」→「DNSレコード設定利用」を選択
3. 「DNSレコード設定を利用する」を有効化

### 3-2. DNSレコードを追加

Vercelで表示された設定情報に基づいて、以下のレコードを追加：

#### パターン1: Aレコードを使用する場合

| タイプ | ホスト名 | TTL | 値 |
|--------|----------|-----|-----|
| A | @ | 3600 | Vercelが提供するIPアドレス（例: 76.76.21.21） |
| A | www | 3600 | Vercelが提供するIPアドレス（例: 76.76.21.21） |

#### パターン2: CNAMEレコードを使用する場合

| タイプ | ホスト名 | TTL | 値 |
|--------|----------|-----|-----|
| A | @ | 3600 | Vercelが提供するIPアドレス |
| CNAME | www | 3600 | cname.vercel-dns.com |

### 3-3. 設定を保存

1. DNSレコードを追加後、「設定する」ボタンをクリック
2. 設定が反映されるまで数分〜数時間かかる場合があります

## 4. Vercelでドメインの確認

### 4-1. ドメインの検証

1. Vercelダッシュボードの **Settings** → **Domains** に戻る
2. 追加したドメインの状態を確認
3. 「Valid Configuration」と表示されれば設定完了

### 4-2. SSL証明書の自動発行

- Vercelが自動的にSSL証明書（Let's Encrypt）を発行します
- 通常、数分〜数時間で完了します
- 「Valid」と表示されればSSL証明書が有効です

## 5. 動作確認

### 5-1. ドメインでアクセス

1. ブラウザで `https://your-domain.com` にアクセス
2. ランディングページが表示されることを確認
3. `https://your-domain.com/lp` でもアクセスできることを確認

### 5-2. リダイレクト設定（オプション）

wwwあり/なしの統一が必要な場合：

1. Vercelダッシュボードの **Settings** → **Domains**
2. 両方のドメイン（`your-domain.com` と `www.your-domain.com`）を追加
3. どちらか一方をプライマリドメインに設定
4. 自動的にリダイレクトされます

## 6. よくある質問

### Q: DNS設定が反映されない

**A:** 以下の点を確認してください：
- DNS設定が正しく入力されているか
- TTL（Time To Live）の設定（通常3600秒）
- 反映まで最大48時間かかる場合があります
- `nslookup` や `dig` コマンドでDNS設定を確認

### Q: SSL証明書が発行されない

**A:** 以下を確認してください：
- DNS設定が正しく反映されているか
- ドメインがVercelで「Valid Configuration」になっているか
- 数時間待ってから再度確認

### Q: wwwありとwwwなし、どちらを使うべき？

**A:** どちらでも構いませんが、統一することを推奨：
- `buddybow.jp` と `www.buddybow.jp` の両方をVercelに追加
- プライマリドメインを1つ設定（例: `buddybow.jp`）
- もう一方は自動的にリダイレクトされます

## 7. 参考情報

- [Vercel公式ドキュメント: Custom Domains](https://vercel.com/docs/concepts/projects/domains)
- [お名前.com DNS設定ガイド](https://help.onamae.com/answer/10852)

## 8. 現在のVercelプロジェクト情報

- **プロジェクト名**: buddybow
- **現在のURL**: https://buddybow.vercel.app
- **カスタムドメイン設定**: Settings → Domains から追加

---

**注意**: DNS設定の反映には時間がかかることがあります。設定後、最大48時間待ってから確認してください。

